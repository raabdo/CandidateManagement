{% extends "base.html" %}
{% block content %}

{% if user.is_authenticated %}
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-dark">Candidate Directory</h2>
        {% if all_candidates %}
            <a href="{% url 'admin:index' %}" class="btn btn-outline-primary btn-sm">
                <i class="bi bi-pencil-square"></i> Manage in Admin
            </a>
        {% endif %}
    </div>

    {% if all_candidates %}
    <div class="content-section p-0 overflow-hidden">
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead class="table-light">
                    <tr>
                        <th class="ps-4">Full Name</th>
                        <th>Gender</th>
                        <th>Email Address</th>
                        <th>Phone Number</th>
                        <th class="text-end pe-4">Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for candidate in all_candidates %}
                    <tr>
                        <td class="ps-4 fw-semibold text-dark">{{ candidate.name }}</td>
                        <td>
                            <span class="badge rounded-pill bg-light text-dark border">
                                {{ candidate.gender|title }}
                            </span>
                        </td>
                        <td><a href="mailto:{{ candidate.email }}" class="text-decoration-none">{{ candidate.email }}</a></td>
                        <td><code class="text-primary">+86 {{ candidate.phone }}</code></td>
                        <td class="text-end pe-4">
                            <span class="text-success">‚óè Active</span>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-3 text-muted small">
        <p>Total candidates found: <strong>{{ all_candidates|length }}</strong></p>
    </div>

    {% else %}
    <div class="content-section text-center py-5">
        <div class="mb-3">
            <i class="bi bi-person-plus" style="font-size: 3rem; color: #e2e8f0;"></i>
        </div>
        <h4 class="text-secondary">No candidates found</h4>
        <p class="text-muted">Your database is currently empty. Start by adding your first applicant.</p>
        <a class="btn btn-primary px-4" href="{% url 'register' %}">Add New Candidate</a>
    </div>
    {% endif %}

{% else %}
    <div class="content-section text-center py-5 border-danger border-top border-4">
        <h2 class="text-danger fw-bold">Access Denied</h2>
        <p class="text-muted">You must be an authorized user to view the recruitment database.</p>
        <a class="btn btn-dark px-5" href="{% url 'login' %}">Login to Continue</a>
    </div>
{% endif %}

{% endblock content %}